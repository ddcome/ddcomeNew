<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>内容列表</title>
<meta name="viewport"
	content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- favicon -->
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

<!-- bootstrap framework -->
<link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet"
	media="screen">

<!-- icon sets -->
<!-- elegant icons -->
<link href="assets/icons/elegant/style.css" rel="stylesheet"
	media="screen">
<!-- elusive icons -->
<link href="assets/icons/elusive/css/elusive-webfont.css"
	rel="stylesheet" media="screen">
<!-- flags -->
<link rel="stylesheet" href="assets/icons/flags/flags.css">
<!-- scrollbar -->
<link rel="stylesheet"
	href="assets/lib/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css">

<!-- page specific stylesheets -->

<!-- footable -->
<link href="assets/lib/footable/css/footable.core.min.css"
	rel="stylesheet" media="screen">

<!-- google webfonts -->
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans&amp;subset=latin,latin-ext'
	rel='stylesheet' type='text/css'>

<!-- main stylesheet -->
<link href="assets/css/main.min.css" rel="stylesheet" media="screen"
	id="mainCss">

<!-- moment.js (date library) -->
<script src="assets/js/moment-with-langs.min.js"></script>

</head>
<body class="side_menu_active side_menu_expanded">
	<div id="page_wrapper">

		<!-- header -->
		<header id="main_header"> </header>

		<!-- breadcrumbs -->
		<nav id="breadcrumbs">
			<ul>
				<li><a href="dashboard.html">首页</a></li>
				<li><span>内容管理</span></li>
				<li><span>内容列表</span></li>
			</ul>
		</nav>

		<!-- main content -->
		<div id="main_wrapper">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-2">
						<div class="list-group">
							<a href="javascript:void(0)" class="active list-group-item">所有内容</a>
						</div>
					</div>
					<div class="col-md-10">
						<div class="row">
							<div class="col-md-6">
								<textarea id="words-textarea" class="form-control input-sm"></textarea>
								<span class="help-block">感言</span>
							</div>
							<div class="col-md-3">
								<input id="words-place" type="text" class="form-control input-sm">
								<span class="help-block">地点</span>
							</div>
							<div class="col-md-3">
								<a class="btn btn-default btn-sm" href="javascript: save();">保存</a>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<table class="table table-yuk2 toggle-arrow-tiny"
									id="footable_demo" data-filter="#textFilter" data-page-size="5">
									<thead>
										<tr>
											<th>感言</th>
											<th>
											时间
											<a href="javascript:sortBycreateTime();"><span class="el-icon-resize-vertical bs_ttip" style="font-size: 10px;"></span></a>
											</th>
											<th>读书地点</th>
											<th>
											状态
											<a href="javascript:findByStatus();"><span class="el-icon-retweet bs_ttip" style="font-size: 15px;"></span></a>
											</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody id="words_cont"></tbody>
								</table>
								<ul id="my-page" class="pagination pagination-sm">
								</ul>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- main menu -->
		<nav id="main_menu">
			<div class="menu_wrapper">
				<ul>
					<li class="first_level"><a href="index.html"> <span
							class="icon_house_alt first_level_icon"></span> <span
							class="menu-title">首页</span>
					</a></li>
					<li class="first_level"><a href="javascript:void(0)"> <span
							class="icon_group first_level_icon"></span> <span
							class="menu-title">用户管理</span>
					</a>
						<ul>
							<li><a href="manager_all.html">系统管理员</a></li>
							<li><a href="manager_configuration.html">当前用户设置</a></li>
							<li><a href="user_all.html">用户管理</a></li>
						</ul></li>
					<li class="first_level"><a href="javascript:void(0)"> <span
							class="icon_pencil_alt first_level_icon"></span> <span
							class="menu-title">内容管理</span>
					</a>
						<ul>
							<li class="submenu-title">Pages</li>
							<li><a href="content_add.html">新增内容</a></li>
							<li><a href="content_list.html">内容列表</a></li>
						</ul></li>
						<li class="first_level">
                            <a href="javascript:void(0)">
                                <span class="icon_pens_alt first_level_icon"></span>
                                <span class="menu-title">MarkDown笔记管理</span>
                            </a>
                            <ul>
                                <li class="submenu-title">Pages</li>
                                <li><a href="markdown_add.html">新增MarkDown笔记</a></li>
                                <li><a href="markdown_list.html">MarkDown笔记列表</a></li>
                            </ul>
                        </li>
					<li class="first_level"><a href="javascript:void(0)"> <span
							class="icon_document first_level_icon"></span> <span
							class="menu-title">PDF文件发布</span>
					</a>
						<ul>
							<li class="submenu-title">Components</li>
							<li><a href="upload_pdf.html">发布</a></li>
							<li><a href="pdfile_list.html">PDF文件列表</a></li>
						</ul></li>
					<li class="first_level"><a href="javascript:void(0)"> <span
							class="icon_comment first_level_icon"></span> <span
							class="menu-title">评论管理</span> <span class="label label-danger">6</span>
					</a>
						<ul>
							<li class="submenu-title">Plugins</li>
							<li><a href="comment_unchecked.html">回复评论(6)</a></li>
							<li><a href="comment_list.html">所有评论</a></li>
						</ul></li>
					<li class="first_level"><a href="javascript:void(0)"> <span
							class="icon_tools first_level_icon"></span> <span
							class="menu-title">其他设置</span>
					</a>
						<ul>
							<li class="submenu-title">Plugins</li>
							<li><a href="author_setting.html">关于作者</a></li>
							<li><a href="people_test.html">公测设置</a></li>
							<li><a href="books_list.html">读书管理</a></li>
							<li><a class="act_nav" href="words_list.html">语录管理</a></li>
						</ul></li>
					<li class="first_level has_submenu"><a
						href="javascript:void(0)"> <span
							class="first_level_icon icon_menu-circle_alt2"></span> <span
							class="menu-title">扩展</span>
					</a>
						<ul>
							<li class="submenu-title">Sub menu</li>
							<li><a href="javascript:void(0)">01. Lorem ipsum</a></li>
							<li class="has_submenu"><a href="javascript:void(0)">02.
									Lorem ipsum</a>
								<ul>
									<li class="has_submenu"><a href="javascript:void(0)">02.1
											Lorem ipsum dolor sit amet</a>
										<ul>
											<li><a href="javascript:void(0)">02.1.1 Lorem ipsum</a></li>
											<li><a href="javascript:void(0)">02.1.2 Lorem ipsum</a></li>
											<li><a href="javascript:void(0)">02.1.3 Lorem ipsum</a></li>
											<li><a href="javascript:void(0)">02.1.4 Lorem ipsum</a></li>
										</ul></li>
									<li><a href="javascript:void(0)">02.2 Lorem ipsum</a></li>
									<li><a href="javascript:void(0)">02.3 Lorem ipsum</a></li>
									<li><a href="javascript:void(0)">02.4 Lorem ipsum</a></li>
								</ul></li>
							<li class="has_submenu"><a href="javascript:void(0)">03.
									Lorem ipsum</a>
								<ul>
									<li><a href="javascript:void(0)">03.1 Lorem ipsum</a></li>
									<li><a href="javascript:void(0)">03.2 Lorem ipsum</a></li>
									<li><a href="javascript:void(0)">03.3 Lorem ipsum</a></li>
									<li><a href="javascript:void(0)">03.4 Lorem ipsum</a></li>
								</ul></li>
							<li><a href="javascript:void(0)">04. Lorem ipsum</a></li>
						</ul></li>
				</ul>
			</div>
			<div class="menu_toggle">
				<span class="icon_menu_toggle"> <i
					class="arrow_carrot-2left toggle_left"></i> <i
					class="arrow_carrot-2right toggle_right" style="display: none"></i>
				</span>
			</div>
		</nav>

	</div>

	<!-- jQuery -->
	<script src="assets/js/jquery.min.js"></script>
	<!-- jQuery Cookie -->
	<script src="assets/js/jqueryCookie.min.js"></script>
	<!-- Bootstrap Framework -->
	<script src="assets/bootstrap/js/bootstrap.min.js"></script>
	<!-- retina images -->
	<script src="assets/js/retina.min.js"></script>
	<!-- switchery -->
	<script src="assets/lib/switchery/dist/switchery.min.js"></script>
	<!-- typeahead -->
	<script src="assets/lib/typeahead/typeahead.bundle.min.js"></script>
	<!-- fastclick -->
	<script src="assets/js/fastclick.min.js"></script>
	<!-- match height -->
	<script src="assets/lib/jquery-match-height/jquery.matchHeight-min.js"></script>
	<!-- scrollbar -->
	<script
		src="assets/lib/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>

	<!--加载页头-->
	<script src="assets/js/main_header.js"></script>

	<!-- Yukon Admin functions -->
	<script src="assets/js/yukon_all.js"></script>

	<!-- page specific plugins -->

	<!-- footable -->
	<script src="assets/lib/footable/footable.min.js"></script>
	<script src="assets/lib/footable/footable.paginate.min.js"></script>
	<script src="assets/lib/footable/footable.filter.min.js"></script>

	<!-- jBox -->
	<script src="assets/lib/jBox-0.3.0/Source/jBox.min.js"></script>
	
	<!-- 新增的JS代码区域 -->
	<script src="assets/js/myPage.own.js"></script>
	
	<script>
		$(function() {
			// footable
			yukon_footable.p_plugins_tables_footable();
		})
		
		/*
		全局变量区域
		*/
		var _data;
            
        function paged() {
   			$("#my-page").empty();
   			var cont = '';
   			cont += '<li class="footable-page-arrow"><a href="javascript:getPage('+minPageNum+');">F</a></li>';
   			for(var i=currentMinNum; i<=currentMaxNum; i++) {
   				cont +='<li class="footable-page';
   				if(i==currentPageNum) {
   					cont += ' active"><a class="active" href="javascript:getPage('+i+');">'+i+'</a></li>';
   				} else {
   					cont += '"><a href="javascript:getPage('+i+');">'+i+'</a></li>';
   				}
   			}
   			cont += '<li class="footable-page-arrow"><a href="javascript:getPage('+maxPageNum+');">L</a></li>';
   			cont += '<li><a>共'+dataSum+'条</a></li>';
   			$("#my-page").append($(cont));
   		}
   		
   		function getPage(currentP) {
   			changePage(currentP);
   			paged();
   			addCont(_data);
   			printPageInfo();
   		}
   		
   		function initP(data,num) {
   			initPage(data,num);
   			paged();
   		}

		function showModel(str) {
			//最后，进行提示信息的展示
			new jBox('Notice', {
				attributes : {
					x : 'right',
					y : 'bottom'
				},
				theme : 'NoticeBorder',
				color : 'green',
				audio : 'assets/lib/jBox-0.3.0/Source/audio/bling2',
				volume : '100',
				stack : false,
				autoClose : 3000,
				animation : {
					open : 'slide:bottom',
					close : 'slide:left'
				},
				onInit : function() {
					this.options.title = 'Information:';
					this.options.content = str;
				}
			});
		}

		function selectWords() {
			var res;
			var params = {
				action : 'select-words',
				data : {}
			};
			console.log(JSON.stringify(params));
			$.ajax({
				async : false, //禁止异步
				url : "/ddcomeNew/goodLuckToDd/back",
				type : "post",
				data : {
					params : JSON.stringify(params)
				},
				dataType : "json",
				success : function(json) {
					showModel("数据加载完成！");
					res = json;
				},
				error : function(json) {
					showModel("数据加载失败！");
					res = json;
				}
			});
			return res;
		}
		
		function addCont(res) {
			$("#words_cont").empty();
			var cont = '';
			var indexMin = (currentPageNum-1)*everyPageTotal;
			var indexMax = ((currentPageNum-1)*everyPageTotal+everyPageTotal)>=dataSum?dataSum:((currentPageNum-1)*everyPageTotal+everyPageTotal);
			for (var i = indexMin; i < indexMax; i++) {
				cont += ''+
				'<tr>'+
					'<td>'+res[i].word+'</td>'+
					'<td>'+res[i].time+'</td>'+
					'<td>'+(typeof(res[i].place)=='undefined'?'-':res[i].place)+'</td>'+
					'<td>'+(res[i].status==1?'alived':'dead')+'</td>'+
					'<td><button class="btn btn-warning btn-sm" style="padding-top:1px; padding-bottom:1px;" onclick="remove('+res[i].id+')">删除</button></td>'+
				'</tr>'+
				'';
			}
			$("#words_cont").append($(cont));
		}
		
		/**
		* 完成的函数
		*/
		function remove(id) {
			console.log(id);
		}
		
		function clearInput() {
			$("#words-textarea").val("");
			$("#words-place").val("");
		}
		
		/**
		* 保存
		*/
		function save() {
			//获取数据
			var word = $("#words-textarea").val();
			var place = $("#words-place").val();
			
			//检验空操作
			if(""==word.trim() || ""==place.trim()) {
				showModel("请输入数据！");
				return;
			}
			
			var params = {
					action : 'insert-words',
					data : {
						word: word,
						place: place
					}
			};
			console.log(JSON.stringify(params));
			$.ajax({
				async : false, //禁止异步
				url : "/ddcomeNew/goodLuckToDd/back",
				type : "post",
				data : {
					params : JSON.stringify(params)
				},
				dataType : "json",
				success : function(json) {
					/*
					$("#message").html(json.message);
					//成功跳转
					if(json.status.toString() == '1'){
						 window.location.href="index.html";
					}
					 */
					res = json;
					showModel("保存成功！");
					
					clearInput();
					addCont(selectWords());
					
				},
				error : function(json) {
					/*
					alert(json.message);
					$("#message").html(json.message);
					 */
					console.log("失败");
					console.log(json);
					showModel("数据加载失败！");
					res = json;
				}
			});
		}
		
		/**
		 *页面加载需要执行的操作 
		 */
		$(function() {
			//1.请求文章的数据
			var res = selectWords();
			_data = res;
			
			initP(res,5);
			
			//2.加载数据到页面
			addCont(res);
			
			paged();
		});


		function edit(str) {
			console.log(str);
		}
	</script>

	<!-- style switcher -->
	<div id="style_switcher">
		<a class="switcher_toggle"><i class="icon_cog"></i></a>
		<div class="style_items">
			<div class="heading_b">
				<span class="heading_text">Top Bar Color</span>
			</div>
			<ul class="clearfix" id="topBar_style_switch">
				<li class="sw_tb_style_0 style_active" title=""><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_1" title="topBar_style_1"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_2" title="topBar_style_2"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_3" title="topBar_style_3"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_4" title="topBar_style_4"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_5" title="topBar_style_5"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_6" title="topBar_style_6"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_7" title="topBar_style_7"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_8" title="topBar_style_8"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_9" title="topBar_style_9"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_10" title="topBar_style_10"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_11" title="topBar_style_11"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_12" title="topBar_style_12"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_13" title="topBar_style_13"><span
					class="icon_check_alt2"></span></li>
				<li class="sw_tb_style_14" title="topBar_style_14"><span
					class="icon_check_alt2"></span></li>
			</ul>
		</div>
		<hr />
		<div class="clearfix hidden-sm hidden-md hidden-xs sepH_b">
			<label>Fixed layout</label>
			<div class="pull-right">
				<input type="checkbox" id="fixed_layout_switch"
					class="js-switch mini-switch">
			</div>
		</div>
		<div class="style_items hidden-sm hidden-md hidden-xs"
			id="fixed_layout_bg_switch">
			<hr />
			<div class="heading_b">
				<span class="heading_text">Background</span>
			</div>
			<ul class="clearfix">
				<li class="sw_bg_0" title="bg_0"></li>
				<li class="sw_bg_1" title="bg_1"></li>
				<li class="sw_bg_2" title="bg_2"></li>
				<li class="sw_bg_3" title="bg_3"></li>
				<li class="sw_bg_4" title="bg_4"></li>
				<li class="sw_bg_5" title="bg_5"></li>
				<li class="sw_bg_6" title="bg_6"></li>
				<li class="sw_bg_7" title="bg_7"></li>
			</ul>
			<hr />
		</div>
		<div class="clearfix sepH_b">
			<label>Top Menu</label>
			<div class="pull-right">
				<input type="checkbox" id="top_menu_switch"
					class="js-switch mini-switch">
			</div>
		</div>
		<div class="clearfix sepH_b">
			<label>Hide Breadcrumbs</label>
			<div class="pull-right">
				<input type="checkbox" id="breadcrumbs_hide"
					class="js-switch mini-switch">
			</div>
		</div>
		<div class="text-center sepH_a">
			<button data-toggle="modal" data-target="#showCSSModal" id="showCSS"
				class="btn btn-default btn-xs btn-outline" type="button">Show
				CSS</button>
		</div>
	</div>
	<div class="modal fade" id="showCSSModal">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">CSS Classes</h4>
				</div>
				<div class="modal-body">
					<pre id="showCSSPre"></pre>
				</div>
			</div>
		</div>
	</div>

</body>
</html>
